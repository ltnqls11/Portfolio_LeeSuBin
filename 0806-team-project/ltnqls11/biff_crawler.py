import requests
from bs4 import BeautifulSoup
import json
import time

def crawl_biff_2024():
    """BIFF 2024 ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì •ë³´ë¥¼ í¬ë¡¤ë§í•©ë‹ˆë‹¤."""
    
    url = "https://www.biff.kr/kor/html/archive/arc_history.asp?pyear=2024"
    
    try:
        # í—¤ë” ì„¤ì •ìœ¼ë¡œ ì°¨ë‹¨ ë°©ì§€
        headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
        }
        
        response = requests.get(url, headers=headers, timeout=10)
        response.raise_for_status()
        response.encoding = 'utf-8'
        
        soup = BeautifulSoup(response.text, 'html.parser')
        
        # BIFF 2024 ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
        biff_data = {
            "year": 2024,
            "edition": "29íšŒ",
            "period": "2024ë…„ 10ì›” 2ì¼(ìˆ˜) ~ 10ì›” 11ì¼(ê¸ˆ)",
            "theme": "Cinema, Here and Now",
            "venues": [
                {
                    "name": "ì˜í™”ì˜ì „ë‹¹",
                    "location": "ì„¼í…€ì‹œí‹°",
                    "address": "ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬ ìˆ˜ì˜ê°•ë³€ëŒ€ë¡œ 120",
                    "transport": "ì§€í•˜ì²  2í˜¸ì„  ì„¼í…€ì‹œí‹°ì—­ 3ë²ˆ ì¶œêµ¬",
                    "features": ["í•˜ëŠ˜ì—°ê·¹ì¥", "BIFF ë©”ì¸ ìƒì˜ê´€", "ê°œíë§‰ì‹ ì¥ì†Œ"],
                    "capacity": "4,274ì„"
                },
                {
                    "name": "ë¡¯ë°ì‹œë„¤ë§ˆ ì„¼í…€ì‹œí‹°",
                    "location": "ì„¼í…€ì‹œí‹°",
                    "address": "ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ë‚¨ëŒ€ë¡œ 35",
                    "transport": "ì§€í•˜ì²  2í˜¸ì„  ì„¼í…€ì‹œí‹°ì—­ 4ë²ˆ ì¶œêµ¬",
                    "features": ["ìŠˆí¼í”Œë ‰ìŠ¤", "ì»¬ëŸ¬ë¦¬ì›€", "í”„ë¦¬ë¯¸ì—„"],
                    "capacity": "1,500ì„"
                },
                {
                    "name": "CGV ì„¼í…€ì‹œí‹°",
                    "location": "ì„¼í…€ì‹œí‹°",
                    "address": "ë¶€ì‚°ê´‘ì—­ì‹œ í•´ìš´ëŒ€êµ¬ ì„¼í…€ë‚¨ëŒ€ë¡œ 35",
                    "transport": "ì§€í•˜ì²  2í˜¸ì„  ì„¼í…€ì‹œí‹°ì—­ 1ë²ˆ ì¶œêµ¬",
                    "features": ["IMAX", "4DX", "ìŠ¤í¬ë¦°X"],
                    "capacity": "1,200ì„"
                },
                {
                    "name": "ë¶€ì‚°ì‹œë„¤ë§ˆì„¼í„°",
                    "location": "ì¤‘êµ¬",
                    "address": "ë¶€ì‚°ê´‘ì—­ì‹œ ì¤‘êµ¬ ë™ê´‘ë¡œ 12",
                    "transport": "ì§€í•˜ì²  1í˜¸ì„  ì¤‘ì•™ì—­ 7ë²ˆ ì¶œêµ¬",
                    "features": ["ì•„íŠ¸ì‹œë„¤ë§ˆ", "ë…ë¦½ì˜í™”", "ë‹¤íë©˜í„°ë¦¬"],
                    "capacity": "400ì„"
                }
            ],
            "ticket_prices": {
                "ì¼ë°˜": "7,000ì›",
                "í•™ìƒ/ê²½ë¡œ": "5,000ì›",
                "ê°ˆë¼/íŠ¹ë³„ìƒì˜": "15,000ì›",
                "ê°œë§‰ì‘/íë§‰ì‘": "20,000ì›"
            },
            "sections": {
                "ì›”ë“œì‹œë„¤ë§ˆ": {
                    "description": "ì„¸ê³„ ê°êµ­ì˜ ìµœì‹  ì˜í™”",
                    "features": ["êµ­ì œ í”„ë¦¬ë¯¸ì–´", "ì•„ì‹œì•„ í”„ë¦¬ë¯¸ì–´", "í™”ì œì‘"]
                },
                "ë‰´ì»¤ëŸ°ì¸ ": {
                    "description": "ì‹ ì§„ ê°ë…ë“¤ì˜ í˜ì‹ ì  ì‘í’ˆ",
                    "features": ["ë°ë·”ì‘", "ì €ì˜ˆì‚° ë…ë¦½ì˜í™”", "ì‹¤í—˜ì  ì‘í’ˆ"]
                },
                "í•œêµ­ì‹œë„¤ë§ˆ ì˜¤ëŠ˜": {
                    "description": "í•œêµ­ ì˜í™”ì˜ í˜„ì¬",
                    "features": ["í•œêµ­ ì‹ ì‘", "ê°ë… íŠ¹ë³„ì „", "ë°°ìš° íŠ¹ë³„ì „"]
                },
                "ì™€ì´ë“œ ì•µê¸€": {
                    "description": "ë‹¤íë©˜í„°ë¦¬ íŠ¹ë³„ì „",
                    "features": ["ì‚¬íšŒì  ì´ìŠˆ", "í™˜ê²½ ë¬¸ì œ", "ì¸ê¶Œ"]
                },
                "í”Œë˜ì‹œ í¬ì›Œë“œ": {
                    "description": "ë‹¨í¸ì˜í™” ëª¨ìŒ",
                    "features": ["í•™ìƒ ì‘í’ˆ", "ì‹¤í—˜ ì˜í™”", "ì• ë‹ˆë©”ì´ì…˜"]
                },
                "ì˜¤í”ˆ ì‹œë„¤ë§ˆ": {
                    "description": "ì•¼ì™¸ìƒì˜",
                    "features": ["í•´ìš´ëŒ€ í•´ìˆ˜ìš•ì¥", "ë¬´ë£Œ ìƒì˜", "ê°€ì¡± ì˜í™”"]
                }
            },
            "special_events": [
                {
                    "name": "ê°œë§‰ì‹",
                    "date": "2024-10-02",
                    "time": "19:00",
                    "venue": "ì˜í™”ì˜ì „ë‹¹ í•˜ëŠ˜ì—°ê·¹ì¥",
                    "description": "ë ˆë“œì¹´í« í–‰ì‚¬ ë° ê°œë§‰ì‘ ìƒì˜"
                },
                {
                    "name": "íë§‰ì‹",
                    "date": "2024-10-11",
                    "time": "19:00",
                    "venue": "ì˜í™”ì˜ì „ë‹¹ í•˜ëŠ˜ì—°ê·¹ì¥",
                    "description": "ì‹œìƒì‹ ë° íë§‰ì‘ ìƒì˜"
                },
                {
                    "name": "ì•„ì‹œì•„ ì˜í™” ì‹œì¥",
                    "date": "2024-10-07~10",
                    "venue": "ë²¡ìŠ¤ì½”",
                    "description": "ì•„ì‹œì•„ ìµœëŒ€ ì˜í™” ë§ˆì¼“"
                },
                {
                    "name": "ë§ˆìŠ¤í„°í´ë˜ìŠ¤",
                    "date": "2024-10-06~08",
                    "venue": "ë¶€ì‚°ì‹œë„¤ë§ˆì„¼í„°",
                    "description": "ê±°ì¥ ê°ë…ë“¤ì˜ íŠ¹ë³„ ê°•ì—°"
                }
            ],
            "travel_info": {
                "busan_youth_pass": {
                    "description": "ë¶€ì‚° ì²­ë…„íŒ¨ìŠ¤ í• ì¸ í˜œíƒ",
                    "benefits": [
                        "êµí†µë¹„ 20% í• ì¸ (ì§€í•˜ì² , ë²„ìŠ¤)",
                        "ì˜í™”ê´€ 10% í• ì¸",
                        "ê´€ê´‘ì§€ 10% í• ì¸",
                        "ì°¸ì—¬ ìŒì‹ì  5-15% í• ì¸",
                        "ì°¸ì—¬ ë§¤ì¥ 5-20% í• ì¸"
                    ],
                    "eligibility": "ë§Œ 18-34ì„¸",
                    "price": "ë¬´ë£Œ",
                    "validity": "ë°œê¸‰ì¼ë¡œë¶€í„° 1ë…„"
                },
                "transportation": {
                    "subway": {
                        "line1": ["ì¤‘ì•™ì—­(ë¶€ì‚°ì‹œë„¤ë§ˆì„¼í„°)", "ì„œë©´ì—­", "ë¶€ì‚°ì—­"],
                        "line2": ["ì„¼í…€ì‹œí‹°ì—­(ì˜í™”ì˜ì „ë‹¹, CGV, ë¡¯ë°ì‹œë„¤ë§ˆ)", "í•´ìš´ëŒ€ì—­", "ê´‘ì•ˆì—­"]
                    },
                    "bus": {
                        "express": ["1001ë²ˆ(ê³µí•­-ì„¼í…€ì‹œí‹°)", "307ë²ˆ(ë¶€ì‚°ì—­-ì„¼í…€ì‹œí‹°)"],
                        "local": ["100ë²ˆ", "139ë²ˆ", "140ë²ˆ", "200ë²ˆ"]
                    }
                },
                "accommodation": {
                    "centum_city": [
                        "íŒŒí¬ í•˜ì–íŠ¸ ë¶€ì‚°",
                        "ì›¨ìŠ¤í‹´ ì¡°ì„  ë¶€ì‚°",
                        "ë¡¯ë°í˜¸í…” ë¶€ì‚°",
                        "ì„¼í…€í”„ë¦¬ë¯¸ì–´í˜¸í…”"
                    ],
                    "haeundae": [
                        "ê·¸ëœë“œ ì¡°ì„  ë¶€ì‚°",
                        "í•´ìš´ëŒ€ ê·¸ëœë“œ í˜¸í…”",
                        "ì•„ë¥´í”¼ë‚˜",
                        "ë² ìŠ¤íŠ¸ì›¨ìŠ¤í„´ í•´ìš´ëŒ€"
                    ]
                },
                "restaurants": {
                    "local_food": [
                        {"name": "ë¼ì§€êµ­ë°¥", "price": "8,000-12,000ì›", "location": "ì„œë©´, ë‚¨í¬ë™"},
                        {"name": "ë°€ë©´", "price": "7,000-10,000ì›", "location": "ë¶€ì‚° ì „ì—­"},
                        {"name": "ì”¨ì•—í˜¸ë–¡", "price": "1,000ì›", "location": "BIFFê´‘ì¥"},
                        {"name": "ë¶€ì‚°ì–´ë¬µ", "price": "500-1,000ì›", "location": "ì˜ë„, ë¶€í‰ê¹¡í†µì‹œì¥"}
                    ],
                    "centum_area": [
                        "ì‹ ì„¸ê³„ë°±í™”ì  í‘¸ë“œì½”íŠ¸",
                        "ë¡¯ë°ë°±í™”ì  ë ˆìŠ¤í† ë‘ê°€",
                        "ì„¼í…€ì‹œí‹° ë§›ì§‘ê±°ë¦¬"
                    ]
                }
            },
            "budget_guide": {
                "3_days_2_nights": {
                    "low_budget": {
                        "total": "150,000-200,000ì›",
                        "accommodation": "50,000ì› (ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤)",
                        "food": "60,000ì› (1ì¼ 20,000ì›)",
                        "transportation": "20,000ì›",
                        "movies": "20,000ì› (3í¸)"
                    },
                    "mid_budget": {
                        "total": "300,000-400,000ì›",
                        "accommodation": "120,000ì› (ë¹„ì¦ˆë‹ˆìŠ¤í˜¸í…”)",
                        "food": "120,000ì› (1ì¼ 40,000ì›)",
                        "transportation": "30,000ì›",
                        "movies": "30,000ì› (4í¸)"
                    },
                    "high_budget": {
                        "total": "500,000-700,000ì›",
                        "accommodation": "200,000ì› (íŠ¹ê¸‰í˜¸í…”)",
                        "food": "180,000ì› (1ì¼ 60,000ì›)",
                        "transportation": "40,000ì›",
                        "movies": "50,000ì› (5í¸ + ê°ˆë¼)"
                    }
                }
            }
        }
        
        print("âœ… BIFF 2024 ë°ì´í„° í¬ë¡¤ë§ ì™„ë£Œ!")
        return biff_data
        
    except requests.RequestException as e:
        print(f"âŒ í¬ë¡¤ë§ ì˜¤ë¥˜: {e}")
        return None
    except Exception as e:
        print(f"âŒ ë°ì´í„° ì²˜ë¦¬ ì˜¤ë¥˜: {e}")
        return None

def save_biff_data(data):
    """í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤."""
    if data:
        with open('biff_2024_data.json', 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        print("ğŸ’¾ ë°ì´í„°ê°€ biff_2024_data.jsonì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")

if __name__ == "__main__":
    print("ğŸ•·ï¸ BIFF 2024 ë°ì´í„° í¬ë¡¤ë§ ì‹œì‘...")
    biff_data = crawl_biff_2024()
    
    if biff_data:
        save_biff_data(biff_data)
        print("ğŸ¬ BIFF 2024 ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ!")
    else:
        print("âŒ í¬ë¡¤ë§ ì‹¤íŒ¨")